# 技术需求澄清会议纪要

## 会议基本信息
- **会议主题**: 项目架构需求澄清与规划
- **日期**: 2025年8月25日
- **时间**: 14:00 - 15:30 (90分钟)
- **地点**: 线上会议
- **参会人员**:
  - 系统架构师 (主持人)
  - 项目经理
  - 前端架构师
  - DevOps架构师

## 会议目标
明确Monorepo架构规范，确定各package职责边界，制定文档标准和部署策略，规划项目重命名工作。

## 议程执行情况

### 1. 开场与目标确认 (5分钟)
**讨论要点**:
- 会议目标重申：基于PRD草案澄清架构需求
- 参会人员角色确认：各专业领域代表到位
- 时间安排说明：严格按议程时间控制

**决策**: ✅ 会议目标明确，时间安排确认

---

### 2. Monorepo架构规范澄清 (20分钟)
**技术讨论**:

#### Package边界定义
- **当前状态分析**: 现有3个packages (screenshot-splitter, shared-components, ui-library)
- **架构师提议**: 明确区分业务package和共享package的职责边界
- **前端架构师建议**: shared-components应作为内部依赖，不单独build和发布
- **DevOps确认**: 支持package独立部署机制，但需要统一配置管理

#### Shared-components定位
- **争议点**: 是否应该独立build和发布
- **共识**: shared-components作为内部依赖库，通过源码引用而非npm包
- **技术方案**: 使用pnpm workspace的本地依赖解析

#### Utils包管理
- **现状**: 各package内部都有utils目录，存在重复代码
- **决策**: 创建全局utils包，存放真正通用的工具函数
- **实施计划**: 逐步迁移各package的通用utils到全局包

#### 配置管理策略
- **架构师提议**: 各package独立config目录 + 根目录fallback配置
- **DevOps建议**: 环境配置通过环境变量注入，避免硬编码
- **前端确认**: 支持config分层策略，package配置优先

**最终决策**:
✅ **Package架构确认**:
```
packages/
  ├── screenshot-splitter/     (业务package - 可独立build部署)
  │   ├── components/          (业务组件)
  │   ├── layouts/             (布局组件)  
  │   ├── utils/               (包内专用工具)
  │   ├── hooks/               (业务hooks)
  │   ├── locales/             (多语言)
  │   ├── docs/                (包文档)
  │   ├── styles/              (样式)
  │   ├── config/              (包配置，优先使用)
  │   └── index.tsx            (入口)
  ├── shared-components/       (共享组件 - 源码引用)
  │   └── components/          (标准组件模板)
  │       ├── ComponentA/
  │       │   ├── utils/       (组件专用工具)
  │       │   ├── hooks/       (组件hooks)
  │       │   ├── docs/        (组件文档)
  │       │   ├── styles/      (组件样式)
  │       │   └── index.tsx    (组件入口)
  │       └── ComponentB/      (相同结构)
  └── utils/                   (全局工具包 - 源码引用)
      └── index.ts             (工具函数集合)
```

✅ **Shared-components引用规范**: 通过相对路径源码引用，不单独build
✅ **工具函数分层策略**: 包内utils → 全局utils，避免重复
✅ **配置管理**: package配置优先 + 根目录fallback

---

### 3. 文档标准制定 (15分钟)
**技术讨论**:

#### 组件文档模板
- **前端架构师提案**: 基于现有CopyrightInfo组件文档优化
- **架构师建议**: 增加Props API详细说明和使用示例
- **共识**: 制定统一的文档模板标准

#### 自动化文档检查
- **DevOps建议**: 集成文档检查到CI流程
- **项目经理要求**: 文档质量作为验收标准之一

**最终决策**:
✅ **文档模板标准**:
```markdown
# [组件名称]

## 用途说明 (Purpose)
[清晰描述组件功能和适用场景]

## Props API
| 属性名 | 类型 | 默认值 | 必填 | 描述 |
|--------|------|--------|------|------|
| prop1  | type | default | ✓    | 描述 |
| prop2  | type | default |      | 描述 |

## 使用示例 (Usage Examples)
```tsx
// 基础用法
import { Component } from '@shared-components/component';

function App() {
  return <Component prop1="value" />;
}
```

## 注意事项 (Caveats)
- [使用限制或特殊场景说明]
- [性能注意事项]
- [浏览器兼容性]

## 版本历史
| 版本 | 日期 | 变更说明 |
|------|------|----------|
| 1.0.0 | 2025-08-25 | 初始版本 |
```

✅ **自动化检查机制**: 集成ESLint插件检查文档完整性
✅ **文档维护责任人**: 前端团队负责组件文档，架构师负责架构文档

---

### 4. 构建与部署方案 (20分钟)
**技术方案评估**:

#### 一次性构建所有packages
- **现状**: 已有build-manager.js支持多package构建
- **DevOps分析**: 当前构建脚本需要优化缓存和并行处理
- **架构师建议**: 保持现有构建系统，优化性能

#### 导航索引首页
- 自定义路由系统展示所有packages
- 嵌入iframe展示每个package 首页

#### 自动发现机制
- **DevOps方案**: 通过文件系统扫描自动发现packages
- **实现复杂度**: 中等，需要处理动态路由生成

**最终决策**:
✅ **构建方案**: 优化现有build-manager.js，增加并行构建和缓存
✅ **自动发现**: 实现基于文件系统的package自动发现和路由生成
✅ **部署策略**: 各package独立部署，支持环境特定配置

**技术规格**:
- 构建性能优化目标: 减少30%构建时间
- 部署环境配置: 通过环境变量管理不同环境

---

### 5. 项目重命名与影响分析 (15分钟)
**讨论要点**:

#### 重命名方案
- **当前名称**: Long_screenshot_splitting_tool (过于具体)
- **提议名称**: awesome-tools (反映工具集合本质)
- **其他候选**: toolkit-platform, devtools-suite

#### 影响范围评估
- **代码引用**: 需要更新所有import路径和配置引用
- **部署配置**: 更新CDN路径、部署脚本、环境变量
- **文档更新**: 所有文档中的项目名称引用

#### 风险评估
- **主要风险**: 重命名过程中遗漏某些引用导致运行时错误
- **缓解措施**: 全面的回归测试和自动化检查

**最终决策**:
✅ **项目名称**: 确定为 `awesome-tools`
✅ **重命名计划**: 分阶段执行，先代码后部署配置
✅ **风险应对**: 创建重命名检查清单和自动化验证脚本

**执行时间表**:
1. 代码重命名 (2天) - 开发团队
2. 配置更新 (1天) - DevOps团队  
3. 测试验证 (2天) - QA团队
4. 部署切换 (1天) - 运维团队

---

### 6. 行动计划与责任分配 (10分钟)
**任务分解**:

| 任务项 | 负责人 | 优先级 | 截止日期 | 状态 |
|--------|--------|--------|----------|------|
| 1. 架构规范文档编写 | 系统架构师 | P0 | 2025-08-27 | 📋 |
| 2. 文档模板实施 | 前端架构师 | P0 | 2025-08-28 | 📋 |
| 4. 构建系统优化 | DevOps架构师 | P1 | 2025-09-03 | 📋 |
| 5. 项目重命名执行 | 全体团队 | P0 | 2025-09-05 | 📋 |
| 6. 全局utils包创建 | 开发团队 | P2 | 2025-09-10 | 📋 |
| 7. 自动化文档检查 | DevOps团队 | P2 | 2025-09-12 | 📋 |

**资源分配**:
- 前端团队: 3人 (文档模板、组件开发)
- DevOps团队: 2人 (构建优化、部署配置)
- 架构师: 1人 (架构设计、技术指导)
- 项目经理: 1人 (进度跟踪、资源协调)

---

### 7. 会议总结与下一步 (5分钟)
**关键决策回顾**:
1. ✅ Monorepo架构规范最终确认
2. ✅ 文档标准模板达成一致
3. ✅ 构建部署技术方案确定
4. ✅ 项目重命名计划制定
7. ✅不需要支持Web Components导出
8. ✅国际化方案统一：
  1. 库选择: i18next (功能全面，适合企业级应用)
  2. 文件格式: JSON (标准格式，工具支持好)
  3. key规范: [package].[component].[key] 命名空间
  4. 提取工具: 统一使用i18next-scanner自动化提取

---
**后续行动**:
- 会议纪要分发确认 (今日完成)
- 各团队开始执行分配任务 (明日开始)
- 下周同一时间进度review会议

---

## 技术架构图

### Monorepo架构示意图
```
awesome-tools/ (重命名后)
├── packages/
│   ├── screenshot-splitter/    → 独立部署
│   ├── shared-components/      → 源码引用
│   └── utils/                  → 源码引用
├── tools/
│   └── build-scripts/          → 构建管理
├── docs/                       → 项目文档
└── config/                     → 全局配置fallback
```

### 构建部署流水线
```
代码变更 → 触发构建 → 并行构建packages → 
单元测试 → 文档生成 → 打包输出 → 
环境部署 → 自动化测试 → 发布完成
```

## 风险登记册

| 风险描述 | 影响 | 概率 | 应对措施 | 责任人 |
|----------|------|------|----------|--------|
| 重命名遗漏引用 | 高 | 中 | 自动化检查脚本 | DevOps |
| 构建性能下降 | 中 | 低 | 并行优化和缓存 | DevOps |
| 文档标准执行不一致 | 中 | 中 | Code Review流程 | 前端架构师 |

## 附件
- PRD草案: `/prd-drfat-20250825.md`
- 会议议程: `/meeting-agenda.md`
- 当前项目结构分析报告

---

*会议记录生成时间: 2025年8月25日 15:45*  
*下次会议时间: 2025年9月1日 14:00*  
*会议记录人: AI会议协调员*