# 产品需求文档 (PRD)

**版本:** 2.0.0
**日期:** 2025-07-19

---

## 1. 概述

本项目旨在对现有的“长截图分割工具”进行一次重大的功能升级和体验优化。核心目标是打破现有文件大小的限制，并引入一个功能完备、交互直观的预览和导出工作流，使用户能够高效、精确地处理超大截图。

## 2. 核心需求 (Jobs-to-be-Done & User Stories)

### 2.1. 提升单图处理上限至 50MB

- **待办任务 (JTBD):** 当我拿到一张非常长或者分辨率极高的截图时，我希望能用这个工具轻松地处理它，而不必担心因为文件太大而被拒绝，或者因为处理过程太慢而卡死。
- **用户故事:** 作为一个专业用户（如设计师、研究员），我希望能上传并处理高达 50MB 的截图文件，以便我能分割包含大量细节的专业级图像，而不会遇到任何限制。
- **功能描述:** 将当前最大支持的单张图片文件大小从 10MB 提升至 50MB。
- **验收标准:**
  - [ ] 用户可以成功选择一个大小在 10MB 到 50MB 之间的图片文件。
  - [ ] 应用能够正确、高效地读取并加载该图片，加载过程中应有明确的进度提示，且 UI 不应冻结。
  - [ ] 图片分割功能对于这个大小的文件能够正常执行。
  - [ ] 当用户尝试上传大于 50MB 的文件时，系统应给出清晰、友好的错误提示：“文件大小不能超过 50MB”。

### 2.2. 实现高级预览与布局

- **待办任务 (JTBD):** 在我最终导出图片之前，我需要能清晰地看到每一张切割后的图片长什么样，并且能方便地管理它们，确保最终拿到我想要的东西。
- **用户故事:** 作为一个普通用户，在执行“分割”操作后，我希望能在一个专门的界面上看到所有切割好的图片片段，左边是所有片段的缩略图列表，右边是一个大图预览区，点击左边的缩略图，右边就显示对应的大图，这样我就可以在导出前仔细检查每一个细节。
- **功能描述:**
  1.  分割完成后，界面切换至一个双栏布局。
  2.  **左侧栏:** 纵向排列所有分割后图片片段的缩略图。
      - 每个缩略图应能清晰地展示其内容。
      - 当片段过多时，此区域应支持滚动。
      - 当前选中的缩略图应有明显的视觉高亮（例如，边框或背景色变化）。
  3.  **右侧栏:** 显示当前在左侧被选中的缩略图对应的高清预览大图。
      - 默认显示第一张图片的大图。
- **验收标准:**
  - [ ] 分割完成后，界面自动切换到左侧为缩略图列表、右侧为大图预览的双栏布局。
  - [ ] 左侧列表正确显示所有分割出的图片片段，顺序无误。
  - [ ] 点击左侧任一缩略图，右侧预览区立即更新为对应的大图。
  - [ ] 默认状态下，第一个缩略图被选中，并在右侧显示大图。
  - [ ] 布局在不同屏幕尺寸下（特别是桌面端）应保持响应式和可用性。

### 2.3. 保留并整合导出功能

- **待办任务 (JTBD):** 在我确认所有图片片段都无误后，我希望能将它们打包下载，或者合并成一个文件，方便我分享或存档。
- **用户故事:** 作为一个用户，在预览界面确认无误后，我希望能看到“导出为 PDF”和“导出为 ZIP”的按钮，并且点击后可以像以前一样下载我需要的文件。
- **功能描述:** 在新的预览界面中，提供 PDF 和 ZIP 两种导出选项。这些按钮应该位于界面的显眼位置。
  - **导出为 PDF:** 将所有分割后的图片按顺序合并到一个 PDF 文件中并下载。
  - **导出为 ZIP:** 将所有分割后的图片作为独立的 JPG/PNG 文件打包到一个 ZIP 压缩包中并下载。
- **验收标准:**
  - [ ] 预览界面存在“导出为 PDF”和“导出为 ZIP”按钮。
  - [ ] 点击“导出为 PDF”，能成功下载包含所有片段的、顺序正确的 PDF 文件。
  - [ ] 点击“导出为 ZIP”，能成功下载包含所有独立图片文件的 ZIP 压缩包。
  - [ ] 导出的文件内容与预览界面所见一致。

## 3. 潜在风险与考量

- **性能瓶颈:** 将文件上限提升至 50MB 是最大的挑战。在客户端处理如此大的文件，可能会轻易导致浏览器标签页崩溃，尤其是在内存 (RAM) 有限的设备上。必须将图片处理逻辑（加载、切割）移出主线程。
- **用户体验:**
  - **加载状态:** 处理大文件耗时会更长，必须提供清晰、不间断的加载和处理进度反馈（例如，进度条、loading 动画），否则用户会以为页面卡死了。
  - **预览渲染:** 如果一次性渲染几十个甚至上百个缩略图，可能会造成界面卡顿。需要考虑懒加载或虚拟化列表等优化策略。
- **交互设计:** 新的预览布局需要精心设计，确保交互流程直观、无歧义。例如，如何返回上一步重新上传图片？按钮的位置和文案是否清晰？
