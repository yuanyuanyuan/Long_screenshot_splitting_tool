# 移除单文件构建模式并实现可配置资源地址 - 需求文档

## 概述

本项目需要移除现有的单文件HTML构建模式，并将构建后的资源引用地址从相对路径改为可配置的预定义地址。这将简化构建流程并提高部署灵活性。

## 功能需求

### 1. 移除单文件构建模式

**用户故事**: 作为开发者，我希望移除单文件HTML构建模式，以便简化构建流程和维护。

**验收标准**:
1. 当构建系统运行时，系统不应支持单文件模式
2. 所有与单文件模式相关的代码、配置和依赖都应被移除
3. 构建脚本中不应包含单文件模式的相关逻辑
4. 项目文档应更新以反映单文件模式的移除

### 2. 实现可配置的资源引用地址

**用户故事**: 作为部署工程师，我希望资源引用地址可以配置，以便在不同环境中灵活部署。

**验收标准**:
1. 当构建系统运行时，系统应支持通过环境变量配置资源基础路径
2. 当未配置自定义地址时，系统应使用默认的相对路径
3. 当配置了自定义地址时，所有构建产物的资源引用应使用该地址
4. 配置系统应支持开发、测试和生产环境的不同配置

### 3. 更新项目文档

**用户故事**: 作为项目维护者，我希望文档反映最新的构建配置，以便新开发者能够正确使用系统。

**验收 criteria**:
1. 当用户阅读README时，应看到更新后的构建说明
2. 当用户查看配置文档时，应看到新的资源地址配置选项
3. 所有提及单文件模式的内容都应被移除或更新
4. 部署指南应更新以反映新的配置方式

## 技术需求

### 4. 环境配置系统增强

**用户故事**: 作为系统架构师，我希望环境配置系统支持资源地址配置，以便统一管理部署配置。

**验收标准**:
1. 当开发人员查看env-config.js时，应看到新的资源地址配置函数
2. 当构建系统读取配置时，应正确处理资源地址配置
3. 当配置发生变化时，构建输出应相应调整

### 5. Vite配置优化

**用户故事**: 作为前端开发者，我希望Vite配置专注于SPA模式，以便提高构建性能。

**验收标准**:
1. 当Vite配置加载时，不应包含单文件模式相关插件
2. 当构建执行时，Vite应只生成SPA模式输出
3. 当资源地址配置后，Vite的base配置应正确设置

## 非功能需求

### 6. 向后兼容性

**用户故事**: 作为现有用户，我希望构建脚本变更不影响现有的SPA模式功能。

**验收标准**:
1. 当执行现有构建命令时，SPA模式应正常工作
2. 当部署到GitHub Pages时，现有功能不应受影响
3. 当使用默认配置时，资源引用行为应与之前一致

### 7. 配置灵活性

**用户故事**: 作为运维工程师，我希望资源地址配置支持多种环境，以便适应不同部署场景。

**验收标准**:
1. 当部署到开发环境时，可以使用开发专用的资源地址
2. 当部署到生产环境时，可以使用CDN地址
3. 当需要本地测试时，可以使用相对路径

## 成功指标

- 构建时间减少（移除单文件模式相关处理）
- 部署配置灵活性提高
- 文档准确性和可用性提升
- 代码维护复杂度降低